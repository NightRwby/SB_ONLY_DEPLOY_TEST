<!DOCTYPE html>
<html lang="ko"        xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1대1문의</title>

    <link rel="stylesheet" th:href="@{/css/inquiry_create.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
</head>
<body>
<!-- 헤더 -->
<div th:replace="~{fragments/header :: headerFragment}"></div>

<!-- 메인 -->
<main id="main">
    <div class="support">
        <div class="suptitle">
            <h2>BlahBlah 1대1 사용자 지원센터입니다.</h2>
        </div>
        <div class="supinfo">
            <div class="supinfoitems">고객님의 소중한 의견을 남겨주세요. 빠르게 도움을 드리겠습니다.</div>
            <div class="supinfoitems">1대일 지원을 통해 불편했던 점을 알려주세요.</div>
            <div class="supinfoitems">문의 사항을 입력하시면, 신속하게 답변해드리겠습니다.</div>
        </div>

        <div class="supdirect">
            <div class="supdirecttext">이전에 문의한 내용이 있으시다면
                <a th:href="@{/inquiry}" class="supdirectlink">문의 내역</a>에서
                확인해보세요.
            </div>
        </div>

        <form id="inquiryForm" th:action="@{/inquiry}" th:object="${inquiry}" method="post">
            <div class="supchoice">
                <h1>문의 작성하기</h1>
                <select th:field="*{inquiryType}" id="inquiry-type"
                        th:classappend="${#fields.hasErrors('inquiryType')} ? 'is-invalid' : ''">
                    <option value="" hidden
                            th:selected="${inquiry.inquiryType == null or inquiry.inquiryType == ''}">
                        문의 유형을 선택하세요
                    </option>
                    <option value="버섯">버섯 관련 문의하기</option>
                    <option value="채팅">채팅 관련 문의하기</option>
                    <option value="결제">결제 관련 문의하기</option>
                    <option value="문서">문서 관련 문의하기</option>
                    <option value="커뮤니티">커뮤니티 관련 문의하기</option>
                    <option value="계정">계정 관련 문의하기</option>
                    <option value="기타">기타 문의하기</option>
                </select>
                <div th:if="${#fields.hasErrors('inquiryType')}"
                     th:errors="*{inquiryType}" class="error-message">
                    [문의 유형 에러 메시지]
                </div>
            </div>

            <div class="supmain">
                <textarea th:field="*{title}" id="supmaintitle" placeholder="문의 제목을 입력해주세요."
                          maxlength="25"
                          th:classappend="${#fields.hasErrors('title')} ? 'is-invalid' : ''"></textarea>
                <div th:if="${#fields.hasErrors('title')}"
                     th:errors="*{title}" class="error-message">
                    [문의 제목 에러 메시지]
                </div>

                <textarea th:field="*{content}" id="supmaintext" placeholder="문의 내용을 입력해주세요."
                          maxlength="500"
                          th:classappend="${#fields.hasErrors('content')} ? 'is-invalid' : ''"></textarea>
                <div th:if="${#fields.hasErrors('content')}"
                     th:errors="*{content}" class="error-message">
                    [문의 내용 에러 메시지]
                </div>

                <span id="charcount">(500 / 500)</span>
            </div>
            <div class="btnarea">
                <button id="supbtn" type="submit">등록하기</button>
            </div>
        </form>
    </div>
</main>


<div th:replace="~{fragments/footer :: footerFragment}"></div>



<script>
    const textArea = document.getElementById('supmaintext');
    const charCount = document.getElementById('charcount');
    const maxLength = 500;  // 최대 글자 수

    charCount.textContent = `(${maxLength - textArea.value.length} / ${maxLength})`;

    textArea.addEventListener('input', () => {
        const currentLength = textArea.value.length;
        const remaining = maxLength - currentLength;
        charCount.textContent = `(${remaining} / ${maxLength})`;
    });


</script>
</body>

</html>